<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><?= $lang['site_name'] ?? 'LSCI' ?></title>
    <link rel="stylesheet" href="<?= BASE_URL ?>assets/css/style.css?v=<?= time() ?>">
    <script>
        // Global BASE_URL for JavaScript AJAX calls
        const BASE_URL = "<?= BASE_URL ?>";
        // Global Translations for JavaScript
        const LANG = {
            loading: "<?= $lang['loading'] ?>",
            no_projects_found: "<?= $lang['no_projects_found'] ?>",
            error_loading_projects: "<?= $lang['error_loading_projects'] ?>",
            member_singular: "<?= $lang['member_singular'] ?>",
            member_plural: "<?= $lang['member_plural'] ?>",
            project_domain: "<?= $lang['project_domain'] ?>",
            project_manager: "<?= $lang['project_manager'] ?>",
            project_funding: "<?= $lang['project_funding'] ?>",
            project_members: "<?= $lang['project_members'] ?>",
            view_details: "<?= $lang['view_details'] ?>",
            fill_required_fields: "<?= $lang['fill_required_fields'] ?>",
            event_date: "<?= $lang['event_date'] ?>",
            event_location: "<?= $lang['event_location'] ?>",
            read_more: "<?= $lang['read_more'] ?>",
            pub_date: "<?= $lang['pub_date'] ?>",
            pub_type: "<?= $lang['pub_type'] ?>",
            pub_authors: "<?= $lang['pub_authors'] ?>",
            pub_abstract: "<?= $lang['pub_abstract'] ?>",
            pub_download: "<?= $lang['pub_download'] ?>",
            error_loading_publications: "<?= $lang['error_loading_publications'] ?>",
            no_publications_found: "<?= $lang['no_publications_found'] ?>",
            view_less_details: "<?= $lang['view_less_details'] ?>",
            view_more_details: "<?= $lang['view_more_details'] ?>"
        };
    </script>
    <script src="<?= BASE_URL ?>assets/js/jquery-3.6.0.js"></script>
</head>

<body>
    <!-- Header -->
    <header class="site-header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <a href="<?= BASE_URL ?>index.php?controller=Home&action=index">
                        <div class="logo-container">
                            <img src="<?= BASE_URL ?>assets/img/logo_lcsi.png" alt="LSCI" class="logo-image">
                            <div class="logo-full-name">Laboratoire de la Communication<br>dans les Systèmes
                                Informatiques</div>
                        </div>
                    </a>
                </div>
                <div class="header-right">
                    <div class="utility-links">
                        <div class="social-links">
                            <a href="#" title="Facebook">FB</a>
                            <a href="#" title="Twitter">X</a>
                            <a href="#" title="LinkedIn">In</a>
                        </div>
                        <div class="auth-links">
                            <?php if (isset($_SESSION['user_id'])): ?>
                                <a href="<?= BASE_URL ?>index.php?controller=Auth&action=logout"
                                    class="btn-logout"><?= $lang['logout'] ?></a>
                            <?php else: ?>
                                <a href="<?= BASE_URL ?>index.php?controller=Auth&action=login"
                                    class="btn-login"><?= $lang['login'] ?></a>
                            <?php endif; ?>
                        </div>
                    </div>
                    <a href="https://www.esi.dz" target="_blank" class="university-link">ESI - École Supérieure
                        d'Informatique</a>
                </div>
                <button class="mobile-menu-toggle" aria-label="Menu">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="main-nav">
        <div class="container">
            <ul class="nav-menu">
                <li><a href="<?= BASE_URL ?>index.php?controller=Home&action=index"><?= $lang['nav_home'] ?></a></li>
                <li><a
                        href="<?= BASE_URL ?>index.php?controller=Team&action=presentation"><?= $lang['nav_presentation'] ?? 'Présentation' ?></a>
                </li>
                <li><a href="<?= BASE_URL ?>index.php?controller=Project&action=index"><?= $lang['nav_projects'] ?></a>
                </li>
                <li><a
                        href="<?= BASE_URL ?>index.php?controller=Publication&action=index"><?= $lang['nav_publications'] ?></a>
                </li>
                <li><a
                        href="<?= BASE_URL ?>index.php?controller=Equipment&action=index"><?= $lang['nav_equipment'] ?></a>
                </li>
                <li><a
                        href="<?= BASE_URL ?>index.php?controller=Offer&action=index"><?= $lang['nav_offers'] ?? 'Offres' ?></a>
                </li>
                <li><a
                        href="<?= BASE_URL ?>index.php?controller=Team&action=membres"><?= $lang['nav_members'] ?? 'Membres' ?></a>
                </li>
                <li><a href="<?= BASE_URL ?>index.php?controller=Home&action=contact"><?= $lang['nav_contact'] ?></a>
                </li>
                <?php if (isset($_SESSION['user_id'])): ?>
                    <li class="user-menu">
                        <a href="<?= BASE_URL ?>index.php?controller=Dashboard&action=index"><?= $lang['dashboard'] ?></a>
                    </li>
                    <li class="notification-item" style="display: flex; align-items: center;">
                        <a href="#" style="padding: 0.5rem 1rem; display: flex; align-items: center; height: 100%;">
                            <img src="<?= BASE_URL ?>assets/img/notif.png" alt="Notifications"
                                style="width: 20px; height: 20px; object-fit: contain;">
                        </a>
                    </li>
                <?php endif; ?>
            </ul>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <?php
            // Content will be inserted here by child templates
            if (isset($content)) {
                echo $content;
            }
            ?>
        </div>
    </main>

    <!-- Footer -->
    <footer class="site-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3><?= $lang['footer_contact'] ?></h3>
                    <p><strong><?= $lang['footer_address'] ?>:</strong><br>
                        BP 68M, Oued Smar, 16270, Alger, Algérie</p>
                    <p><strong><?= $lang['footer_email'] ?>:</strong><br>
                        contact@labo-tdw.dz</p>
                    <p><strong><?= $lang['footer_phone'] ?>:</strong><br>
                        +213 (0) 21 51 11 00</p>
                </div>

                <div class="footer-section">
                    <h3><?= $lang['nav_home'] ?></h3>
                    <ul class="footer-menu">
                        <li><a href="<?= BASE_URL ?>index.php?controller=Home&action=index"><?= $lang['nav_home'] ?></a>
                        </li>
                        <li><a
                                href="<?= BASE_URL ?>index.php?controller=Project&action=index"><?= $lang['nav_projects'] ?></a>
                        </li>
                        <li><a
                                href="<?= BASE_URL ?>index.php?controller=Team&action=index"><?= $lang['nav_teams'] ?></a>
                        </li>
                        <li><a
                                href="<?= BASE_URL ?>index.php?controller=Home&action=contact"><?= $lang['nav_contact'] ?></a>
                        </li>
                    </ul>
                </div>

                <div class="footer-section">
                    <h3><?= $lang['footer_social'] ?></h3>
                    <div class="footer-social">
                        <a href="#" title="Facebook">Facebook</a>
                        <a href="#" title="Twitter">Twitter</a>
                        <a href="#" title="LinkedIn">LinkedIn</a>
                    </div>
                    <div class="university-logo">
                        <a href="https://www.esi.dz" target="_blank">
                            <img src="<?= BASE_URL ?>assets/img/esi-logo.png" alt="ESI"
                                onerror="this.alt='ESI - École Supérieure d\'Informatique'">
                        </a>
                    </div>
                </div>
            </div>

            <div class="footer-bottom">
                <p><?= $lang['footer_copyright'] ?></p>
            </div>
        </div>
    </footer>

    <script src="<?= BASE_URL ?>assets/js/script.js?v=<?= time() ?>"></script>
</body>

</html>